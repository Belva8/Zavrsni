CustomAlgoritam


package com.example.kotlinzavrsni

import android.content.Intent
import android.os.Bundle
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import java.util.Calendar

class CustomAlgoResultsActivity : AppCompatActivity() {

    private lateinit var mTotalStepsTextView: TextView       - - --  UkupniKoraciTV
    private lateinit var mTotalDistanceTextView: TextView     - - - --UkupnaUdaljenostTV
    private lateinit var mTotalDurationTextView: TextView      -- - -  -UkupnoTrajanjeTV
    private lateinit var mAverageSpeedTextView: TextView        - -- - - - -ProsjecnaBrzinaTV
    private lateinit var mAveragFrequencyTextView: TextView    - -- - - - ProsjecnaFrekvencijaTV
    private lateinit var mTotalCalorieBurnedTextView: TextView    -- - - - UkupneKalorijeTV
    private lateinit var mPhysicalActivityTypeTextView: TextView     - -- - - TipFizickeAktivnostiTV
    private lateinit var mStepsTrackerDBHelper: StepsTrackerDBHelper   - - -- - - BrojacKorakaDB  StepsTrackerDBHelper

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.capability_layout)

        mStepsTrackerDBHelper = StepsTrackerDBHelper(this)

        mTotalStepsTextView = findViewById(R.id.total_steps)  - - -- - - -ID
        mTotalDistanceTextView = findViewById(R.id.total_distance)
        mTotalDurationTextView = findViewById(R.id.total_duration)
        mAverageSpeedTextView = findViewById(R.id.average_speed)
        mAveragFrequencyTextView = findViewById(R.id.average_frequency)
        mTotalCalorieBurnedTextView = findViewById(R.id.calories_burned)
        mPhysicalActivityTypeTextView = findViewById(R.id.physicalactivitytype)

        val stepsAnalysisIntent = Intent(applicationContext, StepsTrackerService::class.java)
        startService(stepsAnalysisIntent)

        calculateDataMatrix()
    }

    private fun calculateDataMatrix() { 
        val calendar = Calendar.getInstance()
        val todayDate = "${calendar.get(Calendar.MONTH) + 1}/${calendar.get(Calendar.DAY_OF_MONTH)}/${calendar.get(Calendar.YEAR)}"
        val stepType = mStepsTrackerDBHelper.getStepsByDate(todayDate)
        val walkingSteps = stepType[0]
        val joggingSteps = stepType[1]
        val runningSteps = stepType[2]

        // Calculating total steps
        val totalStepTaken = walkingSteps + joggingSteps + runningSteps
        mTotalStepsTextView.text = "$totalStepTaken Steps"

        // Calculating total distance traveled
        val totalDistance = walkingSteps * 0.5f + joggingSteps * 1.0f + runningSteps * 1.5f
        mTotalDistanceTextView.text = "$totalDistance meters"

        // Calculating total duration
        val totalDuration = walkingSteps * 1.0f + joggingSteps * 0.7f + runningSteps * 0.4f
        val hours = totalDuration / 3600
        val minutes = (totalDuration % 3600) / 60
        val seconds = totalDuration % 60
        mTotalDurationTextView.text = "${hours.toInt()} hrs ${minutes.toInt()} mins ${seconds.toInt()} secs"

        // Calculating average speed
        mAverageSpeedTextView.text =
            if (totalDistance > 0) "${"%.2f".format(totalDistance / totalDuration)} meter per seconds"
            else "0 meter per seconds"

        // Calculating average step frequency
        mAveragFrequencyTextView.text =
            if (totalStepTaken > 0) "${"%.0f".format(totalStepTaken / minutes)} steps per minute"
            else "0 steps per minute"

        // Calculating total calories burned
        val totalCaloriesBurned = walkingSteps * 0.05f + joggingSteps * 0.1f + runningSteps * 0.2f
        mTotalCalorieBurnedTextView.text = "${totalCaloriesBurned.toInt()} Calories"

        // Calculating type of physical activity
        mPhysicalActivityTypeTextView.text =
            "$walkingSteps Walking Steps\n$joggingSteps Jogging Steps\n$runningSteps Running Steps"
    }
}